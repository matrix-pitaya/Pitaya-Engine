# ğŸ‰ Pitaya Engine ç«é¾™æœå¼•æ“

[![Language](https://img.shields.io/badge/Language-C%2B%2B17-blue.svg)](https://en.cppreference.com/w/cpp/17) [![Platform](https://img.shields.io/badge/Platform-Windows-lightgrey.svg)]() [![Compiler](https://img.shields.io/badge/Compiler-MSVC%20v143%20(VS2022)-purple.svg)]() [![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

**Pitaya Engine** æ˜¯ä¸€ä¸ªåŸºäº **C++17** å¼€å‘çš„åˆ†å±‚å¼æ¸¸æˆå¼•æ“ã€‚æœ¬é¡¹ç›®æ—¨åœ¨æ„å»ºä¸€ä¸ªé«˜å†…èšã€ä½è€¦åˆçš„åº•å±‚æ¡†æ¶ï¼Œé€šè¿‡æ¸…æ™°çš„æ¨¡å‹æŠ½è±¡ï¼ˆå¦‚ Bootstrapã€Internal ç³»ç»Ÿä¸ API å±‚ï¼‰æ¥å®ç°ç°ä»£å¼•æ“çš„è®¾è®¡æ€è·¯ã€‚

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡ (Architecture)

Pitaya é‡‡ç”¨ä¸¥æ ¼çš„åˆ†å±‚æ¶æ„ï¼Œç¡®ä¿æ ¸å¿ƒé€»è¾‘ä¸åº•å±‚å®ç°è§£è€¦ï¼š

*   **Application**: åº”ç”¨å±‚å°è£…ï¼Œè´Ÿè´£æ¸¸æˆä¸šåŠ¡é€»è¾‘å…¥å£ã€‚
*   **Engine**: æ ¸å¿ƒå¼•æ“å±‚ï¼ŒåŒ…å«ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆBootstrapï¼‰ã€ç»„ä»¶ç³»ç»Ÿï¼ˆECS/Runtimeï¼‰ä»¥åŠç¡¬ä»¶æŠ½è±¡æ¥å£ï¼ˆRenderer/Physics/Windowï¼‰ã€‚
*   **Core**: åŸºç¡€å·¥å…·åº“ï¼Œæä¾›å•ä¾‹æ¨¡æ¿ã€å¯¹è±¡æ± ã€å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆUID/GUIDï¼‰åŠåº•å±‚å·¥å…·ã€‚
*   **Thirdparty**: å¤–éƒ¨ä¾èµ–åº“ï¼ŒåŒ…å«æ¸²æŸ“ã€ç‰©ç†ã€æ•°å­¦ä»¥åŠåºåˆ—åŒ–å·¥å…·ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§ (Key Features)

- ğŸ› ï¸ **æ¨¡å—åŒ–å¼•å¯¼ (Bootstrap System):** ç»Ÿä¸€çš„å¼•æ“å¯åŠ¨ä¸å…³é—­æµç¨‹ï¼Œç¡®ä¿å­ç³»ç»ŸæŒ‰ä¾èµ–é¡ºåºåˆå§‹åŒ–ã€‚
- ğŸ§µ **å¼‚æ­¥æ—¥å¿—ç³»ç»Ÿ (Async Logging loop):** åŸºäºçº¿ç¨‹æ¥ç®¡çš„æ—¥å¿—è®°å½•æœºåˆ¶ï¼Œç¡®ä¿ç£ç›˜ I/O ä¸å½±å“ä¸»é€»è¾‘å¸§ç‡ã€‚
- ğŸ“¦ **é«˜æ•ˆå†…å­˜ç®¡ç†:** å†…ç½®å¯¹è±¡æ± ï¼ˆObject Poolï¼‰å‡å°‘è¿è¡Œæ—¶å†…å­˜ç¢ç‰‡çš„äº§ç”Ÿã€‚
- ğŸ® **ç»„ä»¶åŒ–å¼€å‘ (Runtime Component):** æä¾› GameObject ä¸ Component æŠ½è±¡ï¼Œæ–¹ä¾¿æ‰©å±•ä¸šåŠ¡é€»è¾‘ã€‚
- ğŸ§± **è§£è€¦æŠ½è±¡æ¥å£:** æ¸²æŸ“ï¼ˆOpenGLï¼‰ä¸ç‰©ç†ï¼ˆBulletï¼‰åç«¯é«˜åº¦æŠ½è±¡ï¼Œæ˜“äºæ›¿æ¢ä¸æ‰©å±•ã€‚
- ğŸš€ **æ¸²æŸ“ä¸»çº¿ç¨‹åˆ†ç¦» (Thread Separation):** å®ç°æ¸²æŸ“çº¿ç¨‹ä¸é€»è¾‘çº¿ç¨‹è§£è€¦ï¼Œé€šè¿‡æŒ‡ä»¤é˜Ÿåˆ—å®ç°å¼‚æ­¥æ¸²æŸ“ã€‚
- âš¡ **å…¨å±€äº‹ä»¶ç³»ç»Ÿ (Event System):** åŸºäºæ¶ˆæ¯æ€»çº¿çš„è§£è€¦é€šä¿¡æœºåˆ¶ï¼Œç®€åŒ–æ¨¡å—é—´äº¤äº’ã€‚
- âŒ¨ï¸ **è¾“å…¥ç³»ç»Ÿ (Input System):** æ”¯æŒçŠ¶æ€è½®è¯¢ä¸äº‹ä»¶å›è°ƒï¼ŒæŠ½è±¡äº†é”®ç›˜ã€é¼ æ ‡çš„åº•å±‚è¾“å…¥ã€‚
- ğŸ•’ **é«˜ç²¾åº¦æ—¶é—´ç³»ç»Ÿ (Time System):** æ¯«ç§’çº§ DeltaTime è®¡ç®—ä¸å…¨å±€æ—¶é’Ÿç®¡ç†ã€‚

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ (Tech Stack)

| ç±»åˆ«              | åº“æ–‡ä»¶                                                       | ç”¨é€”                                                |
| :---------------- | :----------------------------------------------------------- | :-------------------------------------------------- |
| **Graphics**      | [GLEW](http://glew.sourceforge.net/) / [OpenGL](https://www.opengl.org/) | å›¾å½¢é©±åŠ¨ä¸ç¡¬ä»¶åŠ é€Ÿ                                  |
| **Window**        | [GLFW](https://www.glfw.org/)                                | çª—å£åˆ›å»ºä¸è¾“å…¥å¤„ç†                                  |
| **Physics**       | [Bullet Physics](https://pybullet.org/)                      | 3D ç¢°æ’æ£€æµ‹ä¸åŠ¨åŠ›å­¦æ¨¡æ‹Ÿ                             |
| **Math**          | [GLM](https://github.com/g-truc/glm)                         | é’ˆå¯¹ OpenGL è®¾è®¡çš„æ•°å­¦åº“                            |
| **ECS**           | [EnTT](https://github.com/skypjack/entt)                     | é«˜æ€§èƒ½ ECS æ¡†æ¶æ”¯æŒ                                 |
| **Serialization** | [YAML-cpp](https://github.com/jbeder/yaml-cpp)               | é…ç½®æ–‡ä»¶ä¸åœºæ™¯åºåˆ—åŒ–                                |
| **Scripting**     | [Mono](https://www.mono-project.com/)                        | åµŒå…¥å¼ C# è„šæœ¬è¿è¡Œæ—¶ï¼Œå®ç°æ¸¸æˆé€»è¾‘çƒ­æ›´æ–°ä¸ API ç»‘å®š |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Getting Started)

### ç¯å¢ƒä¾èµ–
*   **æ“ä½œç³»ç»Ÿ:** Windows 10/11
*   **IDE:** Visual Studio 2022 (è‡³å°‘æ”¯æŒ MSVC v143)
*   **SDK:** Windows 10 SDK (10.0.xxxxx.x)

### ç¼–è¯‘è¿è¡Œ
1.  **å…‹éš†ä»“åº“:**
    ```bash
    git clone --recursive https://github.com/matrix-pitaya/Pitaya-Engine.git
    ```
2.  **æ‰“å¼€å·¥ç¨‹:**
    ä½¿ç”¨ Visual Studio 2022 æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„ `Pitaya.sln`ã€‚
3.  **é…ç½®ç¯å¢ƒ:**
    ç¡®ä¿æ„å»ºé…ç½®è®¾ä¸º `Debug` æˆ– `Release` (x64)ã€‚
4.  **è¿è¡Œé¡¹ç›®:**
    å°† `Application` è®¾ä¸ºå¯åŠ¨é¡¹ç›®å¹¶æŒ‰ `F5` è¿è¡Œã€‚

---

## ğŸ“‚ ç›®å½•å¯¼èˆª (Project Map)

```text
Pitaya/
â”œâ”€â”€ Application/     			# åº”ç”¨å±‚ä»£ç 
â”‚   â”œâ”€â”€ Application/  			# åº”ç”¨å±‚å°è£…
â”‚   â””â”€â”€ main.cpp	 			# mainå‡½æ•°
â”œâ”€â”€ Core/            			# æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ Console/  				# æ§åˆ¶å°
â”‚   â”œâ”€â”€ Enum/  					# æšä¸¾
â”‚   â”œâ”€â”€ Identifier/  			# UIDã€GUIDæ ‡è¯†ç¬¦
â”‚   â”œâ”€â”€ ObjectPool/  			# å¯¹è±¡æ± 
â”‚   â”œâ”€â”€ Singleton/ 				# å•ä¾‹æ¨¡æ¿
â”‚   â””â”€â”€ Utility/ 				# å·¥å…·å°è£…
â”œâ”€â”€ Engine/          			# å¼•æ“æ•´ä½“æ§åˆ¶ä¸è°ƒåº¦æ¨¡å—
â”‚   â”œâ”€â”€ Engine/
â”‚   â”‚   â”œâ”€â”€ API/				# å¼•æ“æ¥å£API
â”‚   â”‚   â”‚	â”œâ”€â”€ Engine/
â”‚   â”‚   â”‚	â”œâ”€â”€ Event/
â”‚   â”‚   â”‚	â”œâ”€â”€ Input/
â”‚   â”‚   â”‚	â”œâ”€â”€ Log/
â”‚   â”‚   â”‚	â”œâ”€â”€ Thread/
â”‚   â”‚   â”‚	â””â”€â”€ Time/
â”‚   â”‚   â”œâ”€â”€ Config/				# å¼•æ“é…ç½®ç±»
â”‚   â”‚   â”‚	â””â”€â”€ Config.h
â”‚   â”‚   â”œâ”€â”€ Editor/
â”‚   â”‚   â”œâ”€â”€ Interface/			# æŠ½è±¡æ¥å£
â”‚   â”‚   â”‚	â”œâ”€â”€ Physics.h		# ç‰©ç†æ¥å£
â”‚   â”‚   â”‚	â”œâ”€â”€ Renderer.h		# æ¸²æŸ“æ¥å£
â”‚   â”‚   â”‚	â””â”€â”€ Window.h		# çª—å£æ¥å£
â”‚   â”‚   â”œâ”€â”€ Internal/			# å¼•æ“å†…éƒ¨æ¨¡å—
â”‚   â”‚   â”‚	â”œâ”€â”€ Event/			# äº‹ä»¶æ¨¡å—
â”‚   â”‚   â”‚	â”œâ”€â”€ Input/			# è¾“å…¥æ¨¡å—
â”‚   â”‚   â”‚	â”œâ”€â”€ Log/			# æ—¥å¿—æ¨¡å—
â”‚   â”‚   â”‚	â”œâ”€â”€ Thread/			# çº¿ç¨‹æ¨¡å—
â”‚   â”‚   â”‚	â””â”€â”€ Time/			# æ—¶é—´æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ Runtime/
â”‚   â”‚   â”‚	â”œâ”€â”€ Object.h
â”‚   â”‚   â”‚	â”œâ”€â”€ Entity.h
â”‚   â”‚   â”‚	â”œâ”€â”€ GameObject.h
â”‚   â”‚   â”‚	â”œâ”€â”€ Component.h
â”‚   â”‚   â”‚	â”œâ”€â”€ Transform.h
â”‚   â”‚   â”‚	â”œâ”€â”€ RigidBody.h
â”‚   â”‚   â”‚	â””â”€â”€ ...
â”‚   â”‚   â”œâ”€â”€ Engine.cpp
â”‚   â”‚   â””â”€â”€ Engine.h
â”‚   â”œâ”€â”€ Physics/
â”‚   â”‚   â”œâ”€â”€ Backend/			# ç‰©ç†åç«¯
â”‚   â”‚   â”‚	â””â”€â”€Bullet/
â”‚   â”‚   â””â”€â”€ Runtime/
â”‚   â”œâ”€â”€ Renderer/
â”‚   â”‚   â”œâ”€â”€ Backend/			# æ¸²æŸ“åç«¯
â”‚   â”‚   â”‚	â””â”€â”€OpenGL/
â”‚   â”‚   â””â”€â”€ Runtime/
â”‚   â””â”€â”€ Window/
â”‚       â”œâ”€â”€ Platform/			# çª—å£å¹³å°
â”‚       â”‚	â””â”€â”€GLFW/
â”‚       â””â”€â”€ Runtime/
â”œâ”€â”€ exe/             			# å¯æ‰§è¡Œç¨‹åºè¾“å‡ºç›®å½•
â”‚   â””â”€â”€ x64/x86/
â”‚   	â””â”€â”€ Debug/Release/
â”‚		    â”œâ”€â”€ assimp-vc143-mt.dll
â”‚		    â”œâ”€â”€ engine.cfg
â”‚		    â”œâ”€â”€ log.txt
â”‚		    â”œâ”€â”€ Pitaya.exe
â”‚		    â””â”€â”€ yaml-cpp.dll
â”œâ”€â”€ intermediate/    			# ä¸­é—´äº§ç‰©ï¼Œå¦‚ç¼–è¯‘æ–‡ä»¶ã€ä¸´æ—¶æ–‡ä»¶ç­‰
â”‚   â””â”€â”€ ...						# ç¼–è¯‘äº§ç‰©
â”œâ”€â”€ library/         			# é¡¹ç›®åº“æ–‡ä»¶
â”‚   â””â”€â”€ x64/x86/
â”‚   	â”œâ”€â”€ Debug/Release/		
â”‚		    â”œâ”€â”€ Core.lib		# æ ¸å¿ƒæ¨¡å—lib
â”‚		    â””â”€â”€ Engine.lib		# å¼•æ“lib		
â”œâ”€â”€ resource/        			# èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ shaders/     			# ç€è‰²å™¨æºç  (.glsl, .hlsl)
â”‚   â”œâ”€â”€ textures/    			# å›¾ç‰‡/è´´å›¾
â”‚   â””â”€â”€ models/      			# æ¨¡å‹æ–‡ä»¶
â”œâ”€â”€ thirdparty/      			# ç¬¬ä¸‰æ–¹ä¾èµ–ä¸åº“æ–‡ä»¶
â”‚   â”œâ”€â”€ ASSIMP/
â”‚   â”œâ”€â”€ bullet/
â”‚   â”œâ”€â”€ entt/
â”‚   â”œâ”€â”€ GLEW/
â”‚   â”œâ”€â”€ GLFW/
â”‚   â”œâ”€â”€ glm/
â”‚   â”œâ”€â”€ Mono/
â”‚   â””â”€â”€ yaml/
â”œâ”€â”€ README.md        			# é¡¹ç›®è¯´æ˜æ–‡æ¡£
â””â”€â”€ pitaya.sln   	 			# VS Solution è§£å†³æ–¹æ¡ˆæ–‡ä»¶
```

---

## ğŸ“… è·¯çº¿å›¾ (Roadmap)

- [x] **æ ¸å¿ƒæ¶æ„**ï¼šå®ç°ä¸»é€»è¾‘çº¿ç¨‹ä¸æ¸²æŸ“çº¿ç¨‹çš„ç‰©ç†åˆ†ç¦»ã€‚
- [x] **é€šä¿¡æœºåˆ¶**ï¼šå…¨å±€è§£è€¦äº‹ä»¶æ€»çº¿ä¸æŒ‡ä»¤é˜Ÿåˆ—ç³»ç»Ÿã€‚
- [x] **æ—¥å¿—ç³»ç»Ÿ**ï¼šéé˜»å¡å¼å¼‚æ­¥åŒç¼“å†²æ—¥å¿—ç³»ç»Ÿã€‚
- [x] **åŸºç¡€æ¡†æ¶**ï¼šåŸºäº Bootstrap çš„å­ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚
- [ ] **è„šæœ¬ç³»ç»Ÿ**ï¼šé›†æˆ Mono è¿è¡Œæ—¶ï¼Œå®Œæˆ C# è„šæœ¬ API ç»‘å®šã€‚
- [ ] **ç¼–è¾‘å™¨ç•Œé¢**ï¼šé›†æˆ ImGui å¹¶æ„å»ºå®æ—¶åœºæ™¯æ ‘ä¸å±æ€§æŸ¥çœ‹å™¨ã€‚
- [ ] **æ¸²æŸ“å¢å¼º**ï¼šå¼•å…¥å»¶è¿Ÿæ¸²æŸ“ç®¡çº¿ (Deferred Rendering) ä¸ PBR ç¯å¢ƒå…‰ã€‚
- [ ] **èµ„æºç®¡ç†**ï¼šåŸºäº GUID çš„å¼‚æ­¥èµ„æºåŠ è½½ä¸å†…å­˜æ± ç®¡ç†ã€‚

---

## ğŸ“„ è®¸å¯è¯ (License)

æœ¬é¡¹ç›®åŸºäº **[MIT License](LICENSE)** åè®®å¼€æºã€‚ä½ å¯ä»¥è‡ªç”±åœ°åœ¨å•†ä¸šæˆ–éå•†ä¸šé¡¹ç›®ä¸­å¼•ç”¨ã€ä¿®æ”¹ã€‚
